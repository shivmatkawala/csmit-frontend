<!--
  NOTE: For Template-Driven Forms to work, the "FormsModule" must be imported
  in the respective Angular module (e.g., AppModule or FeatureModule).
-->

<div class="job-upload-container">
  <div class="job-upload-card">

    <!-- Updated Header with the new accent color -->
    <h1 class="text-3xl font-extrabold header-title mb-6 text-center mx-auto">
      Job Posting Uploader
    </h1>
    <p class="text-gray-500 mb-8 text-center text-lg">
      Fill in the required details to publish a new job vacancy.
    </p>

    <!-- Template-Driven Form -->
    <!-- #jobForm="ngForm" creates a local template reference for the form's state -->
    <form #jobForm="ngForm" (ngSubmit)="onSubmit(jobForm)" class="space-y-8">

      <!-- Company Name Field -->
      <div>
        <label for="companyName" class="input-label">
          Company Name <span class="text-red-500">*</span>
        </label>
        <input 
          id="companyName" 
          name="companyName" 
          type="text" 
          required
          placeholder="e.g., Google, Amazon, Tata Consultancy"
          class="input-field"
          [(ngModel)]="jobData.companyName"
          #companyName="ngModel"
        />
        <!-- Validation Message -->
        <div class="validation-message" *ngIf="companyName.invalid && (companyName.dirty || companyName.touched)">
          <span *ngIf="companyName.errors?.['required']">Company Name is required.</span>
        </div>
      </div>

      <!-- Job Role Field -->
      <div>
        <label for="jobRole" class="input-label">
          Job Role Title <span class="text-red-500">*</span>
        </label>
        <input 
          id="jobRole" 
          name="jobRole" 
          type="text" 
          required
          placeholder="e.g., Senior Software Developer, Data Scientist"
          class="input-field"
          [(ngModel)]="jobData.jobRole"
          #jobRole="ngModel"
        />
        <div class="validation-message" *ngIf="jobRole.invalid && (jobRole.dirty || jobRole.touched)">
          <span *ngIf="jobRole.errors?.['required']">Job Role is required.</span>
        </div>
      </div>

      <!-- Required Skills Field (Functionality hint added) -->
      <div>
        <label for="requiredSkills" class="input-label">
          Key Skills (Comma-separated) <span class="text-red-500">*</span>
        </label>
        <input 
          id="requiredSkills" 
          name="requiredSkills" 
          type="text" 
          required
          placeholder="e.g., JavaScript, Angular, AWS, Python"
          class="input-field"
          [(ngModel)]="jobData.requiredSkills"
          #requiredSkills="ngModel"
        />
        <div class="validation-message" *ngIf="requiredSkills.invalid && (requiredSkills.dirty || requiredSkills.touched)">
          <span *ngIf="requiredSkills.errors?.['required']">Required Skills list is mandatory.</span>
        </div>
      </div>

      <!-- Description Field -->
      <div>
        <label for="description" class="input-label">
          Detailed Job Description <span class="text-red-500">*</span>
        </label>
        <textarea 
          id="description" 
          name="description" 
          rows="7" 
          required
          placeholder="Provide a detailed overview of responsibilities and qualifications..."
          class="input-field resize-y"
          [(ngModel)]="jobData.description"
          #description="ngModel"
        ></textarea>
        <div class="validation-message" *ngIf="description.invalid && (description.dirty || description.touched)">
          <span *ngIf="description.errors?.['required']">Job Description is required.</span>
        </div>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit"
        [disabled]="jobForm.invalid"
        class="submit-button"
        [ngClass]="jobForm.invalid ? 'disabled' : 'active'"
      >
        <span class="text-xl">ðŸš€</span> Publish Job Post
      </button>
    </form>

    <!-- Submission Status and Data Display (Improved Look) -->
    <div *ngIf="isSubmitted" class="submission-status">
      <h3 class="text-lg font-bold text-green-700 mb-2">âœ… Job Uploaded Successfully!</h3>
      <p class="text-sm text-gray-700">Your job post is now live. Here is the data you submitted:</p>
      <pre class="submitted-data-display">{{ submittedJobData | json }}</pre>
      <button (click)="resetForm(jobForm)" class="reset-button">
          + Upload Another Job
      </button>
    </div>

  </div>
</div>
