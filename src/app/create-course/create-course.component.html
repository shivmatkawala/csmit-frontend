<!-- Main Container -->
<div class="main-container">
  <div class="form-card" style="max-width: 550px; position: relative; overflow: hidden;">

    <!-- Header (Hamburger Menu Button removed) -->
    <div class="form-header" style="display: flex; justify-content: space-between; align-items: center;">
      <h1 class="form-header-title">
        {{ isEditMode ? 'Update Course' : 'Create New Course' }}
      </h1>
      <!-- Hamburger Menu Icon was here, removed as per user request -->
    </div>
    
    <p class="form-header-subtitle">
      {{ isEditMode ? 'Edit the fields below and save your changes.' : 'Enter the course name, content URL, and list of subjects.' }}
    </p>

    <!-- Form Submission Status/Messages -->
    <div *ngIf="errorMessage" class="submission-success-message" style="background-color: #fcebeb; border-color: #e74c3c; color: #c0392b; margin-bottom: 20px;">
        <p class="message-title">Error!</p>
        <p class="message-content">{{ errorMessage }}</p>
    </div>

    <div *ngIf="successMessage" class="submission-success-message" style="margin-bottom: 20px;">
        <p class="message-title">Success!</p>
        <p class="message-content">{{ successMessage }}</p>
    </div>

    <!-- Form Area - Template Driven Form (TDF) -->
    <!-- Bind the form with #courseForm reference -->
    <form #courseForm="ngForm" (ngSubmit)="onSubmit(courseForm)" class="batch-form">

      <!-- Section 1: Course Details (Single Column) -->
      <div class="form-section-group single-col">
        
        <!-- Course Name -->
        <div class="form-group">
          <label for="courseName" class="input-label">Course Name</label>
          <input
            id="courseName"
            name="courseName"
            type="text"
            required
            minlength="5"
            [(ngModel)]="courseData.courseName"
            #courseName="ngModel"
            class="input-field"
            placeholder="Example: Robotics with ROS"
          />
          <div *ngIf="courseName.invalid && (courseName.dirty || courseName.touched)" class="error-message">
            <div *ngIf="courseName.errors?.['required']">Course Name is required.</div>
            <div *ngIf="courseName.errors?.['minlength']">Name must be at least 5 characters long.</div>
          </div>
        </div>

        <!-- Content URL -->
        <div class="form-group">
          <label for="contentUrl" class="input-label">Content URL</label>
          <input
            id="contentUrl"
            name="contentUrl"
            type="url"
            required
            pattern="https?://.+"
            [(ngModel)]="courseData.contentUrl"
            #contentUrl="ngModel"
            class="input-field"
            placeholder="Example: https://example.com/course-materials"
          />
          <div *ngIf="contentUrl.invalid && (contentUrl.dirty || contentUrl.touched)" class="error-message">
            <div *ngIf="contentUrl.errors?.['required']">Content URL is required.</div>
            <div *ngIf="contentUrl.errors?.['pattern']">Please enter a valid URL.</div>
          </div>
        </div>

        <!-- Subjects (Comma-separated input) -->
        <div class="form-group">
          <label for="subjectsInput" class="input-label">Subjects (Comma-separated)</label>
          <textarea
            id="subjectsInput"
            name="subjectsInput"
            rows="3"
            required
            [(ngModel)]="courseData.subjectsInput"
            #subjectsInput="ngModel"
            class="input-field textarea-field"
            placeholder="Example: Golang, Python, ROS, AI/ML"
          ></textarea>
          <p class="form-header-subtitle" style="margin-top: 5px; font-size: 0.8rem;">
            Please separate each subject with a comma (,).
          </p>
          <div *ngIf="subjectsInput.invalid && (subjectsInput.dirty || subjectsInput.touched)" class="error-message">
            Subject list is required.
          </div>
        </div>

      </div>

      <!-- Submit Button -->
      <div class="submit-button-container">
        <!-- Reset/Cancel Button (Visible in Edit Mode) -->
        <button
          *ngIf="isEditMode"
          type="button"
          (click)="resetFormState(courseForm)"
          class="submit-button"
          style="background-color: #95a5a6; color: white; margin-right: 15px;"
        >
          Cancel / Create New
        </button>

        <!-- Main Action Button -->
        <button
          type="submit"
          [disabled]="courseForm.invalid || isSubmitting"
          class="submit-button"
          [class.enabled]="courseForm.valid && !isSubmitting"
          [class.disabled]="courseForm.invalid || isSubmitting"
        >
          {{ isSubmitting ? (isEditMode ? 'Updating Course...' : 'Creating Course...') : (isEditMode ? 'Update Course' : 'Create Course') }}
        </button>
      </div>
    </form>

  </div>
</div>


<!-- Side Panel for Course List (Removed as per user request to move listing to manage-course view) -->
<!-- Panel Overlay for better UX (Removed) -->