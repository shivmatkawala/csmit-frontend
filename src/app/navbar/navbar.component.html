<!-- Main navigation bar -->
<nav class="navbar">
  <div class="container navbar-container">
    
    <!-- Left side: Logo/Home Link - Updated with better look -->
    <a (click)="selectFeature('batch')" class="logo-link" title="Home - Upcoming Batches">
        <!-- Logo Text with Accent -->
        <span>CSM</span><span class="logo-accent">TTI</span>
    </a>

    <!-- Middle/Right side: Links aur CTA button ko behtar design mein manage kiya gaya hai -->
    <div class="nav-right">
      
      <!-- Upcoming Batches Link -->
      <a (click)="selectFeature('batch')" class="nav-link" [class.active]="selectedFeature === 'batch'">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        <span>Upcoming Batches</span>
      </a>

      <!-- Notes Link -->
      <a (click)="selectFeature('notes')" class="nav-link" [class.active]="selectedFeature === 'notes'">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        <span>Notes</span>
      </a>
      
      <!-- Success Stories Link -->
      <a (click)="selectFeature('success')" class="nav-link success-link" [class.active]="selectedFeature === 'success'">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" /></svg>
        <span>Success Stories</span>
      </a>
      
      <!-- CTA Button - Now has visible color and shadow -->
      <button class="cta-btn">Start Learning</button>
    </div>

  </div>
</nav>

<!-- Dynamic Featured Content Display Area (Content Card) -->
<div class="feature-display-container">
  
  <!-- Upcoming Batch Feature (Default & Rotating) -->
  <div *ngIf="selectedFeature === 'batch'" class="feature-content batch-feature-content">
    <h2 class="feature-title-english">üî• Upcoming Batches: Get Ready to Learn!</h2>
    <div class="batch-feature-card">
      <!-- Icon ko emoji se replace kiya gaya hai jaisa ki image mein tha -->
      <div class="info-icon">üöÄ</div>
      <div class="rotating-batch-details">
        <h3 class="rotating-title">{{ featuredBatch.courseName }}</h3>
        <p class="rotating-description">{{ featuredBatch.description }}</p>
        <div class="rotating-footer">
          <!-- Date ko zyada attractive banaya gaya hai -->
          <span class="rotating-date">üóìÔ∏è {{ featuredBatch.startDate }}</span>
          <!-- Enroll Button - Now has visible color and shadow -->
          <a href="#" class="feature-enroll-btn">Enroll Now</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes Feature - Dynamic Content (Code with Harry style functionality) -->
  <div *ngIf="selectedFeature === 'notes'" class="feature-content notes-feature-content">
    <h2 class="feature-title-english">üìö Notes and Study Resources</h2>
    <p class="feature-subtitle">{{ currentNotesData.title }} | High-quality, curated notes for every course. Select a syllabus and download your resources.</p>

    <div class="notes-main-card">
      <!-- Syllabus Filter Option - Selection is now more prominent and drives content -->
      <div class="syllabus-filter-container">
          <label for="syllabus-select">Filter by Syllabus:</label>
          <select id="syllabus-select" class="syllabus-select" 
                  [ngModel]="selectedSyllabus" 
                  (ngModelChange)="onSyllabusChange($event)">
              <option *ngFor="let syllabus of syllabusOptions" [value]="syllabus">{{ syllabus }}</option>
          </select>
          <!-- Download Button - Enhanced design, dynamic text -->
          <button class="download-btn">Download PDF Notes for {{ selectedSyllabus }} ‚Üí</button>
      </div>
      
      <!-- Metrics and Topics - Dynamic, animated content based on selected syllabus -->
      <!-- 'key' attribute use nahi ho sakta, isliye class ke zariye animation trigger kar rahe hain -->
      <div class="note-animation-wrap">
        <!-- Notes Metrics -->
        <div class="notes-metrics">
          <div class="metric-card">
            <div class="metric-value">{{ currentNotesData.metric1.value }}</div>
            <div class="metric-label">{{ currentNotesData.metric1.label }}</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">{{ currentNotesData.metric2.value }}</div>
            <div class="metric-label">{{ currentNotesData.metric2.label }}</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">{{ currentNotesData.metric3.value }}</div>
            <div class="metric-label">{{ currentNotesData.metric3.label }}</div>
          </div>
        </div>
        
        <p class="notes-subtitle">Key Topics in **{{ selectedSyllabus }}**</p>
        
        <!-- Topics (similar to CodeWithHarry's topic list) -->
        <div class="notes-topics">
          <span *ngFor="let topic of currentNotesData.topics" class="topic-tag">{{ topic.icon }} {{ topic.name }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Stories Feature - Rotation added -->
  <div *ngIf="selectedFeature === 'success'" class="feature-content success-feature-content">
    <h2 class="feature-title-english">üèÜ Inspiring Success Stories ({{ allSuccessStories.length }} Total)</h2>
    <p class="feature-subtitle">Our students have secured placements in the world's best companies. Stories rotate automatically every 6 seconds.</p>
    
    <div class="stories-main-card">
      <!-- Success Stories Grid (Only showing the currently visible slice) -->
      <div class="success-stories-grid-compact story-grid-animation">
        <!-- Show stories in a compact grid - loop over visibleStories -->
        <div class="story-compact-card" *ngFor="let story of visibleStories" (click)="viewStory(story)">
          <img [src]="story.image" alt="{{story.name}}" class="story-compact-photo">
          <h3 class="story-compact-name">{{story.name}}</h3>
          <p class="story-compact-company">Placed at <strong class="text-primary-color">{{story.company}}</strong></p>
          <!-- Read Story Button - Now has visible color and shadow -->
          <button class="story-compact-read-btn">Read Story ‚Üí</button>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Story Detail Modal - Attractive modal with gradient border and central photo -->
<div class="story-modal-overlay" *ngIf="selectedStory" (click)="closeStoryModal()">
  <div class="story-modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close-btn" (click)="closeStoryModal()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
    </button>
    <!-- Modal photo is now styled to pop out -->
    <img [src]="selectedStory.image" alt="{{selectedStory.name}}" class="modal-student-photo">
    <h2>{{selectedStory.title}}</h2>
    <h3>{{selectedStory.name}} - <span class="company-name">{{selectedStory.company}}</span></h3>
    <p>{{selectedStory.fullStory}}</p>
  </div>
</div>
