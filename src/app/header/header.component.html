<header
  class="site-header"
  [class.scrolled]="isHeaderScrolled"
  [class.menu-open]="isMenuOpen">

  <div class="container header-container">

    <!-- LEFT: Logo -->
    <div class="logo-container">
      <a href="javascript:void(0)" class="logo-link" (click)="zoomLogo()">
        <img src="assets/logo.jpg" alt="Quenrix Logo" class="logo-img" [class.zoomed]="isLogoZoomed">
        <span class="logo-text">Quenrix</span>
      </a>
    </div>

    <!-- CENTER: Desktop Navigation -->
    <nav class="main-nav desktop-nav-links">
      <ul class="nav-list">
        
        <!-- Courses Dropdown -->
        <li class="nav-item">
          <a class="nav-link" 
             [class.active]="isCoursesOpen" 
             (click)="toggleCourses($event)">
            Courses
            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
            </svg>
          </a>

          <div class="dropdown-menu" [class.show]="isCoursesOpen" (click)="$event.stopPropagation()">
            <a *ngFor="let course of courses" 
               class="dropdown-item" 
               (click)="openEnrollmentModal(course.courseName)">
               {{ course.courseName }}
            </a>
            <span *ngIf="courses.length === 0" class="dropdown-item" style="cursor: default; color: #888;">
              Loading...
            </span>
          </div>
        </li>

        <!-- Careers -->
        <li class="nav-item">
          <a href="javascript:void(0)" 
             class="nav-link" 
             [class.active]="activePage === 'careers'"
             (click)="navigateTo('careers', $event)">
             Careers
          </a>
        </li>
        
        <!-- Blog -->
        <li class="nav-item">
          <a href="javascript:void(0)" 
             class="nav-link" 
             [class.active]="activePage === 'blog'"
             (click)="navigateTo('blog', $event)">
             Blog
          </a>
        </li>
        
        <!-- Contact -->
        <li class="nav-item">
          <a href="javascript:void(0)" 
             class="nav-link" 
             [class.active]="activePage === 'contact'"
             (click)="navigateTo('contact', $event)">
             Contact
          </a>
        </li>
      </ul>
    </nav>

    <!-- RIGHT: Desktop Login & Mobile Toggle -->
    <div class="actions-container right-group">
      <a routerLink="/login" class="login-btn desktop-only">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
           <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 19.5a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.638z" />
        </svg>
        Log In
      </a>

      <button class="hamburger-menu" (click)="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>

  <!-- --- MOBILE NAVIGATION DRAWER --- -->
  <div class="mobile-overlay" [class.open]="isMenuOpen" (click)="toggleMenu()"></div>
  
  <nav class="mobile-nav" [class.open]="isMenuOpen">
    
    <!-- PANEL 1: MAIN MENU -->
    <div class="mobile-panel main-panel" [class.slide-left]="showMobileCourses">
      <div class="mobile-nav-header">
        <span class="menu-title">Menu</span>
      </div>
      
      <div class="mobile-links">
        <a class="mobile-item has-arrow" (click)="openMobileCourses()">
          <span class="flex-center">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="item-icon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.499 5.221 69.14 69.14 0 00-2.923.295m-15.684 0a69.14 69.14 0 012.922.295M3 14h18M12 14v8m0 0V14m0 8h.01" />
             </svg>
             Courses
          </span>
          <svg class="chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
          </svg>
        </a>

        <!-- Mobile Links -->
        <a href="javascript:void(0)" class="mobile-item" 
           [class.active]="activePage === 'careers'"
           (click)="navigateTo('careers', $event)">
           Careers
        </a>
        <a href="javascript:void(0)" class="mobile-item" 
           [class.active]="activePage === 'blog'"
           (click)="navigateTo('blog', $event)">
           Blog
        </a>
        <a href="javascript:void(0)" class="mobile-item" 
           [class.active]="activePage === 'contact'"
           (click)="navigateTo('contact', $event)">
           Contact
        </a>
        
        <div class="mobile-divider"></div>
        
        <a routerLink="/login" class="mobile-login-btn" (click)="toggleMenu()">
          Log In
        </a>
      </div>
    </div>

    <!-- PANEL 2: COURSES SUB-MENU -->
    <div class="mobile-panel sub-panel" [class.slide-in]="showMobileCourses">
      <div class="mobile-nav-header sub-header">
        <button class="back-btn" (click)="closeMobileCourses()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
          </svg>
          Back
        </button>
        <span class="menu-title">All Courses</span>
      </div>

      <div class="mobile-links">
        <a *ngFor="let course of courses" 
           class="mobile-item" 
           (click)="openEnrollmentModal(course.courseName)">
           {{ course.courseName }}
        </a>
        <span *ngIf="courses.length === 0" class="mobile-item" style="color: #888;">
           Loading courses...
        </span>
      </div>
    </div>
  </nav>

</header>

<!-- Enrollment Popup -->
<div class="modal-backdrop" *ngIf="isEnrollmentModalOpen" (click)="closeEnrollmentModal()">
  <div class="enrollment-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div>
        <h3>Enroll Now</h3>
        <p>Start your journey in {{ selectedCourse }}</p>
      </div>
      <button class="close-modal-btn" (click)="closeEnrollmentModal()">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="enroll-message">
        <strong>Note:</strong> If you want more details regarding the course, please fill out this form to enroll. Our expert will call you.
      </div>
      <form (ngSubmit)="submitEnrollment()">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" class="form-control" placeholder="John Doe" required [(ngModel)]="enrollmentForm.name">
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="john@example.com" required [(ngModel)]="enrollmentForm.email">
        </div>

        <!-- UPDATED: Phone Number Group with Country Code & Manual Option -->
        <div class="form-group">
          <label for="phone">Phone Number</label>
          <div class="phone-input-group">
            
            <!-- Standard Dropdown - Always Visible -->
            <select class="form-control country-select" name="countryCodeSelect" 
                    [(ngModel)]="countrySelectValue" (change)="onCountryChange()">
              <option *ngFor="let c of countryCodes" [value]="c.code">
                {{ c.code === 'Others' ? 'Others' : c.code + ' (' + c.country + ')' }}
              </option>
            </select>

            <!-- Manual Input (Shows NEXT TO dropdown when 'Others' is selected) -->
            <input *ngIf="isManualCountryCode" type="text" class="form-control manual-code-input" 
                   name="manualCountryCode" [(ngModel)]="enrollmentForm.countryCode" 
                   placeholder="+Code" (input)="sanitizeCountryCode($event)">

            <input type="tel" id="phone" name="phone" class="form-control phone-input" 
                   placeholder="98765 43210" required 
                   minlength="7" maxlength="15" 
                   [(ngModel)]="enrollmentForm.phone">
          </div>
        </div>

        <button type="submit" class="submit-btn" [disabled]="isSubmitting">
          {{ isSubmitting ? 'Submitting...' : 'Request Callback' }}
        </button>
      </form>
    </div>
  </div>
</div>